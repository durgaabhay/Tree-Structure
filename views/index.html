<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Build your tree</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
          crossorigin="anonymous">
    <link rel="icon" href="../../../../favicon.ico">
    <title>Admin Login</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <div class="alert alert-info" role="alert">
        Start building your tree! Enter a child name to your parent.
        Caution! You cannot add more than 15 child nodes to any parent!!!
        You can begin with adding your first child to the Root Node.
    </div>
    <table class="table table-striped">
        <tbody>
        <tr>
            <td colspan="1">
                <form class="well form-horizontal" method="post">
                    <fieldset>
                        <div class="form-group">
                            <label class="col-md-4 control-label">Node Name</label>
                            <div class="col-md-8 inputGroupContainer">
                                <div class="input-group">
                                    <input id="nodeName" name="nodeName" placeholder="Node Name"
                                                  class="form-control" required="true" value="" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-4 control-label">Parent Node</label>
                            <div class="col-md-8 inputGroupContainer">
                                <div class="input-group">
                                        <input id="parentNode" name="parentNode" placeholder="Parent Node"
                                           class="form-control" required="true" value="" type="text">
                                    <button class="btn btn-primary" type="submit"
                                            formmethod="post" formaction="/">Add</button>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </td>
            <td colspan="1">
                <form class="well form-horizontal" method="post">
                    <fieldset>
                        <div class="form-group">
                            <label class="col-md-4 control-label">Delete Child Node</label>
                            <div class="col-md-8 inputGroupContainer">
                                <div class="input-group">
                                    <input id="deleteNode" name="deleteNode" placeholder="Child Node"
                                           class="form-control" required="true" value="" type="text">
                                    <button class="btn btn-danger" type="submit"
                                            formaction="/deleteChild">Delete</button>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="card card-body">
        <p id="status"><b>UPDATED TREE STRUCTURE</b></p>
        <p id="tree-view"></p>
    </div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">

    $(function(){
        const httpGetTree = new XMLHttpRequest();
        console.log(location.hostname);
        const getURLTree = 'http://'+ location.hostname +':3000/buildTree';
        console.log('url is =' + getURLTree);
        httpGetTree.open("GET", getURLTree);
        httpGetTree.send();
        httpGetTree.onreadystatechange = (e) => {

            let obj = httpGetTree.responseText;
            document.getElementById('tree-view').innerText = obj;
        }
    });

</script>
</body>
</html>
